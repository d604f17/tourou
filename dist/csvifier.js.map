{"version":3,"sources":["../src/csvifier.js"],"names":["readValues","type","name","values","data","readFileSync","__dirname","diagKeys","oneKeys","i","value","substring","indexOf","length","JSON","parse","writeValues","routeData","distance","realDistance","inputData","numberOfWaypoints","iterations","area","runtime","stringify","route","writeFileSync","fileName","rows","readdirSync","forEach","file","split","cityIP","test","city","passes","shift","rowPart1","rowPart2","rowPart3","_tour","push","join"],"mappings":";;;;AAAA;;;;;;AAEA,IAAMA,aAAa,SAAbA,UAAa,CAACC,IAAD,EAAOC,IAAP,EAAgB;AACjC,MAAIC,SAAS,EAAb;AACA,MAAIC,OAAO,aAAGC,YAAH,CAAgBC,YAAY,WAAZ,GAA0BJ,IAA1B,GAAiC,MAAjD,EAAyD,MAAzD,CAAX;;AAEA,MAAIK,WAAW,CACb,OADa,EAEb,UAFa,EAGb,cAHa,EAIb,mBAJa,EAKb,YALa,EAMb,MANa,EAOb,SAPa,EAQb,OARa,CAAf;;AAWA,MAAIC,UAAU,CACZ,OADY,EAEZ,UAFY,EAGZ,cAHY,EAIZ,mBAJY,EAKZ,MALY,EAMZ,SANY,EAOZ,OAPY,CAAd;;AAUA,MAAIP,SAAS,MAAT,IAAmBA,SAAS,MAAhC,EAAwC;AACtC,SAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC1B,UAAIC,QAAQN,KAAKO,SAAL,CAAe,CAAf,EAAkBP,KAAKQ,OAAL,CAAa,GAAb,CAAlB,CAAZ;AACAR,aAAOA,KAAKO,SAAL,CAAeP,KAAKQ,OAAL,CAAa,GAAb,IAAoB,CAAnC,EAAsCR,KAAKS,MAA3C,CAAP;;AAEAV,aAAOI,SAASE,CAAT,CAAP,IAAsBC,KAAtB;AACD;;AAEDP,WAAOI,SAAS,CAAT,CAAP,IAAsBO,KAAKC,KAAL,CAAWX,IAAX,CAAtB;AACD,GATD,MASO,IAAIH,SAAS,KAAb,EAAoB;AACzB,SAAK,IAAIQ,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AAC1B,UAAIC,SAAQN,KAAKO,SAAL,CAAe,CAAf,EAAkBP,KAAKQ,OAAL,CAAa,GAAb,CAAlB,CAAZ;AACAR,aAAOA,KAAKO,SAAL,CAAeP,KAAKQ,OAAL,CAAa,GAAb,IAAoB,CAAnC,EAAsCR,KAAKS,MAA3C,CAAP;;AAEAV,aAAOK,QAAQC,CAAR,CAAP,IAAqBC,MAArB;AACD;;AAEDP,WAAOK,QAAQ,CAAR,CAAP,IAAqBM,KAAKC,KAAL,CAAWX,IAAX,CAArB;AACD;;AAED,SAAOD,MAAP;AACD,CA9CD;;AAgDA,IAAMa,cAAc,SAAdA,WAAc,CAACf,IAAD,EAAOC,IAAP,EAAaC,MAAb,EAAwB;AAC1C,MAAIF,SAAS,MAAT,IAAmBA,SAAS,MAAhC,EAAwC;AACtC,QAAMgB,YAAed,OAAOO,KAAtB,UAAgCP,OAAOe,QAAvC,UAAoDf,OAAOgB,YAAjE;AACA,QAAMC,YAAejB,OAAOkB,iBAAtB,UAA4ClB,OAAOmB,UAAzD;AACA,QAAIlB,OAAUa,SAAV,UAAwBG,SAAxB,UAAsCjB,OAAOoB,IAA7C,UAAsDpB,OAAOqB,OAA7D,UAAyEV,KAAKW,SAAL,CACzEtB,OAAOuB,KADkE,CAA7E;;AAGA,iBAAGC,aAAH,CAAiBrB,YAAY,WAAZ,GAA0BJ,IAA1B,GAAiC,MAAlD,EAA0DE,IAA1D;AACD,GAPD,MAOO,IAAIH,SAAS,KAAb,EAAoB;AACzB,QAAMgB,aAAed,OAAOO,KAAtB,UAAgCP,OAAOe,QAAvC,UAAoDf,OAAOgB,YAAjE;AACA,QAAMC,kBAAejB,OAAOkB,iBAA5B;AACA,QAAIjB,OAAUa,UAAV,UAAwBG,UAAxB,UAAsCjB,OAAOoB,IAA7C,UAAsDpB,OAAOqB,OAA7D,UAAyEV,KAAKW,SAAL,CACzEtB,OAAOuB,KADkE,CAA7E;;AAGA,iBAAGC,aAAH,CAAiBrB,YAAY,WAAZ,GAA0BJ,IAA1B,GAAiC,MAAlD,EAA0DE,IAA1D;AACD;AACF,CAhBD;;AAkBA,IAAIwB,WAAW,YAAf;AACA,IAAIC,OAAO,EAAX;AACA,aAAGC,WAAH,CAAexB,YAAY,WAA3B,EAAwCyB,OAAxC,CAAgD,gBAAQ;AAAA,oBAC/BC,KAAKC,KAAL,CAAW,GAAX,CAD+B;AAAA;AAAA,MAC/C/B,IAD+C;AAAA,MACzCgC,MADyC;;AAAA,oBAEjChC,KAAK+B,KAAL,CAAW,GAAX,CAFiC;AAAA;AAAA,MAE/CE,IAF+C;AAAA,MAEzClC,IAFyC;;AAGtD,MAAIA,SAAS,MAAb,EAAqB;AAAA,wBACgBiC,OAAOD,KAAP,CAAa,GAAb,CADhB;AAAA;AAAA,QACZG,IADY;AAAA,QACNd,UADM;AAAA,QACMe,MADN;;AAGnB,QAAID,SAASR,QAAb,EAAuB;AACrB,UAAIzB,SAASH,WAAWC,IAAX,EAAiB+B,KAAKC,KAAL,CAAW,GAAX,EAAgBK,KAAhB,EAAjB,CAAb;;AAEA,UAAIC,WAAcpC,OAAOO,KAArB,SAA8BP,OAAOe,QAArC,SAAiDf,OAAOgB,YAA5D;AACA,UAAIqB,WAAcrC,OAAOkB,iBAArB,SAA0ClB,OAAOmB,UAAjD,SAA+DnB,OAAOoB,IAA1E;AACA,UAAIkB,WAActC,OAAOqB,OAArB,SAAgCrB,OAAOuB,KAAP,CAAagB,KAAb,CAAmB7B,MAAvD;;AAEAgB,WAAKc,IAAL,CAAaJ,QAAb,SAAyBC,QAAzB,SAAqCC,QAArC;AACD;AACF;AACF,CAhBD;;AAkBA,aAAGd,aAAH,CAAiBrB,YAAY,gBAAZ,GAA+BsB,QAA/B,GAA0C,MAA3D,EAAmEC,KAAKe,IAAL,CAAU,MAAV,CAAnE;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"csvifier.js","sourcesContent":["import fs from 'fs';\r\n\r\nconst readValues = (type, name) => {\r\n  let values = {};\r\n  let data = fs.readFileSync(__dirname + '/../logs/' + name + '.log', 'utf8');\r\n\r\n  let diagKeys = [\r\n    'value',\r\n    'distance',\r\n    'realDistance',\r\n    'numberOfWaypoints',\r\n    'iterations',\r\n    'area',\r\n    'runtime',\r\n    'route',\r\n  ];\r\n\r\n  let oneKeys = [\r\n    'value',\r\n    'distance',\r\n    'realDistance',\r\n    'numberOfWaypoints',\r\n    'area',\r\n    'runtime',\r\n    'route',\r\n  ];\r\n\r\n  if (type === 'diag' || type === 'half') {\r\n    for (var i = 0; i < 7; i++) {\r\n      let value = data.substring(0, data.indexOf(','));\r\n      data = data.substring(data.indexOf(',') + 2, data.length);\r\n\r\n      values[diagKeys[i]] = value;\r\n    }\r\n\r\n    values[diagKeys[7]] = JSON.parse(data);\r\n  } else if (type === 'one') {\r\n    for (var i = 0; i < 6; i++) {\r\n      let value = data.substring(0, data.indexOf(','));\r\n      data = data.substring(data.indexOf(',') + 2, data.length);\r\n\r\n      values[oneKeys[i]] = value;\r\n    }\r\n\r\n    values[oneKeys[6]] = JSON.parse(data);\r\n  }\r\n\r\n  return values;\r\n};\r\n\r\nconst writeValues = (type, name, values) => {\r\n  if (type === 'diag' || type === 'half') {\r\n    const routeData = `${values.value}, ${values.distance}, ${values.realDistance}`;\r\n    const inputData = `${values.numberOfWaypoints}, ${values.iterations}`;\r\n    var data = `${routeData}, ${inputData}, ${values.area}, ${values.runtime}, ${JSON.stringify(\r\n        values.route)}`;\r\n\r\n    fs.writeFileSync(__dirname + '/../logs/' + name + '.log', data);\r\n  } else if (type === 'one') {\r\n    const routeData = `${values.value}, ${values.distance}, ${values.realDistance}`;\r\n    const inputData = `${values.numberOfWaypoints}`;\r\n    var data = `${routeData}, ${inputData}, ${values.area}, ${values.runtime}, ${JSON.stringify(\r\n        values.route)}`;\r\n\r\n    fs.writeFileSync(__dirname + '/../logs/' + name + '.log', data);\r\n  }\r\n};\r\n\r\nlet fileName = 'copenhagen';\r\nlet rows = [];\r\nfs.readdirSync(__dirname + '/../logs/').forEach(file => {\r\n  const [name, cityIP] = file.split('_');\r\n  const [test, type] = name.split('-');\r\n  if (type === 'diag') {\r\n    const [city, iterations, passes] = cityIP.split('-');\r\n\r\n    if (city === fileName) {\r\n      let values = readValues(type, file.split('.').shift());\r\n\r\n      let rowPart1 = `${values.value};${values.distance};${values.realDistance}`;\r\n      let rowPart2 = `${values.numberOfWaypoints};${values.iterations};${values.area}`;\r\n      let rowPart3 = `${values.runtime};${values.route._tour.length}`;\r\n\r\n      rows.push(`${rowPart1};${rowPart2};${rowPart3}`);\r\n    }\r\n  }\r\n});\r\n\r\nfs.writeFileSync(__dirname + '/../logs/diag-' + fileName + '.csv', rows.join('\\r\\n'));\r\n\r\n// fs.readdirSync(__dirname + '/../logs/').forEach(file => {\r\n//   const [name, city] = file.split('_');\r\n//   const [test, type] = name.split('-');\r\n//\r\n//   if (type === 'one' || type === 'diag') {\r\n//     let values = readValues(type, file.split('.').shift());\r\n//     values.realDistance = values.route._realDistance + 2500 * (values.route._tour.length - 2);\r\n//     values.distance = values.route._distance - 2500;\r\n//     delete values.route._graph;\r\n//\r\n//     console.log(file);\r\n//\r\n//     writeValues(type, file.split('.').shift(), values);\r\n//   }\r\n// });"]}