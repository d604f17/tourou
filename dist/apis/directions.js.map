{"version":3,"sources":["../../src/apis/directions.js"],"names":["DirectionsAPI","key","url","parameters","Promise","resolve","reject","request","callback","query","stringify","json","then","result","status","error_message","console","log"],"mappings":";;;;;;;;;;AAAA;;;;AACA;;;;;;;;IAEMA,a;AACJ,yBAAYC,GAAZ,EAAiB;AAAA;;AACf,SAAKA,GAAL,GAAWA,GAAX;AACA,SAAKC,GAAL,GAAW,sDAAX;AACD;;;;0BAEKC,U,EAAY;AAAA;;AAChB,aAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACtC,YAAMC,UAAU,SAAVA,OAAU,CAACC,QAAD,EAAc;AAC5B,cAAMC,QAAQ,aAAGC,SAAH,cACTP,UADS;AAEZF,iBAAK,MAAKA;AAFE,aAAd;;AAKA,iBAAO,8BAAG;AACRC,iBAAK,MAAKA,GAAL,GAAW,GAAX,GAAiBO,KADd;AAERE,kBAAM;AAFE,WAAH,EAGJC,IAHI,CAGC,kBAAU;AAChB,gBAAIC,OAAOC,MAAP,KAAkB,IAAtB,EAA4B;AAC1BN,uBAASK,MAAT;AACD,aAFD,MAEO,IAAIA,OAAOC,MAAP,KAAkB,kBAAtB,EAA0C;AAC/C,kBAAID,OAAOE,aAAP,KACA,0DADJ,EACgE;AAC9DT,uBAAOO,OAAOE,aAAd;AACD;;AAEDR,sBAAQC,QAAR;AACD,aAPM,MAOA,IAAIK,OAAOC,MAAP,KAAkB,cAAtB,EAAsC;AAC3CN,uBAASK,MAAT;AACD,aAFM,MAEA;AACLG,sBAAQC,GAAR,CAAYJ,OAAOC,MAAnB;AACAP,sBAAQC,QAAR;AACD;AACF,WAnBM,CAAP;AAoBD,SA1BD;;AA4BAD,gBAAQ,UAASM,MAAT,EAAiB;AACvBR,kBAAQQ,MAAR;AACD,SAFD;AAGD,OAhCM,CAAP;AAiCD;;;;;;kBAGYb,a","file":"directions.js","sourcesContent":["import qs from 'qs';\r\nimport rp from 'request-promise';\r\n\r\nclass DirectionsAPI {\r\n  constructor(key) {\r\n    this.key = key;\r\n    this.url = 'https://maps.googleapis.com/maps/api/directions/json';\r\n  }\r\n\r\n  query(parameters) {\r\n    return new Promise((resolve, reject) => {\r\n      const request = (callback) => {\r\n        const query = qs.stringify({\r\n          ...parameters,\r\n          key: this.key,\r\n        });\r\n\r\n        return rp({\r\n          url: this.url + '?' + query,\r\n          json: true,\r\n        }).then(result => {\r\n          if (result.status === 'OK') {\r\n            callback(result);\r\n          } else if (result.status === 'OVER_QUERY_LIMIT') {\r\n            if (result.error_message ===\r\n                'You have exceeded your daily request quota for this API.') {\r\n              reject(result.error_message);\r\n            }\r\n\r\n            request(callback);\r\n          } else if (result.status === 'ZERO_RESULTS') {\r\n            callback(result);\r\n          } else {\r\n            console.log(result.status);\r\n            request(callback);\r\n          }\r\n        });\r\n      };\r\n\r\n      request(function(result) {\r\n        resolve(result);\r\n      });\r\n    });\r\n  }\r\n}\r\n\r\nexport default DirectionsAPI;"]}